(function(s){'use strict';var t=function(a){a=a||{};for(var i=1;i<arguments.length;i++){var b=arguments[i];if(!b)continue;for(var c in b){if(b.hasOwnProperty(c)){if(typeof b[c]==='object')t(a[c],b[c]);else a[c]=b[c]}}}return a};var u=function(n){var o=this;var p={};var q={debug:false,eventErrorHandler:function(e,a,b,c){console.error('Event handler for "%s" resulted in error:',a,e,b,c)}};n=n||{};var r=t({},q,n);o.on=function(a,b){if(r.debug){console.info('Attached handler to event "%s"',a,b)}if('undefined'===typeof p[a]){p[a]=[]}p[a].push(b)};o.emmit=function(){var j=this;if(j instanceof u){j=null}var k=(function(a){var b=[];for(var i in a){b.push(a[i])}return b})(arguments);var l=k.shift();if('undefined'===typeof p[l]){if(r.debug){console.info('No handlers registered for event "%s"',l)}return}var m=o.listeners(l);(function(f,g){for(var i in f){var h=(function(a,b,c,d){try{a.apply(j,c)}catch(e){d.eventErrorHandler(e,b,c,a)}});s.setTimeout(h.bind(j,f[i],l,g,r),0)}})(m,k)};o.removeListener=function(a,b){if('undefined'===typeof p[a]){return false}var i=p[a].indexOf(b);if(i<0){return false}delete p[a][i];return true};o.removeAllListeners=function(a){if('undefined'!==typeof p[a]){delete p[a]}};o.listeners=function(a){if('undefined'!==typeof p[a]){return p[a]}return[]};o.forward=function(a){return function(){return o.emmit.bind(this,a).apply(this,arguments)}}};s.EventMachine=function(a){return new u(a)}})(window);