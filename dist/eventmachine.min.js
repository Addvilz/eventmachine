!function(e){"use strict";var n=0;"undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(n=4);var r=function(e){e=e||{};for(var n=1;n<arguments.length;n++){var t=arguments[n];if(t)for(var o in t)t.hasOwnProperty(o)&&("object"==typeof t[o]?r(e[o],t[o]):e[o]=t[o])}return e},t=function(e,n,r,t){try{e.apply(this,r)}catch(o){t(o,n,r,e)}},o=function(e,i){var s=i||this;s.eventRegistry={};var f={debug:!1,disableDeferred:!1,disableDeferredFor:{},eventErrorHandler:function(e,n,r,t){console.error('Event handler for "%s" resulted in error:',n,e,r,t)}};return e=e||{},s.options=r({},f,e),s.on=function(e,n){return s.options.debug&&console.info('Attached handler to event "%s"',e,n),"undefined"==typeof s.eventRegistry[e]&&(s.eventRegistry[e]=[]),s.eventRegistry[e].push(n),s},s.emit=function(e,r,i,f,d,u){var a=this;a instanceof o&&(a=null);for(var v=arguments.length,l=new Array(v),c=1;v>c;++c)l[c-1]=arguments[c];if("undefined"==typeof s.eventRegistry[e])return void(s.options.debug&&console.info('No handlers registered for event "%s"',e));for(var g=s.listeners(e),p=0,y=g.length;y>p;p++){var h=g[p];s.options.disableDeferred||"undefined"!=typeof h.disableDeferred||s.options.disableDeferredFor?t.call(a,g[p],e,l,s.options.eventErrorHandler):setTimeout(t.bind(a,g[p],e,l,s.options.eventErrorHandler),n)}return s},s.removeListener=function(e,n){if("undefined"==typeof s.eventRegistry[e])return!1;var r=s.eventRegistry[e].indexOf(n);return 0>r?!1:(s.eventRegistry[e].splice(r,1),!0)},s.removeAllListeners=function(e){return"undefined"!=typeof s.eventRegistry[e]&&delete s.eventRegistry[e],s},s.listeners=function(e){return"undefined"!=typeof s.eventRegistry[e]?s.eventRegistry[e]:[]},s.forward=function(e){return function(){return s.emit.bind(this,e).apply(this,arguments)}},s.setDeferredFor=function(e,n){return s.options.disableDeferredFor[e]=n?!0:!1,s},s};e.EventMachine=function(e){return new o(e)},e.EventMachine.extend=function(e,n){return new o(n,e)}}("undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports:window);