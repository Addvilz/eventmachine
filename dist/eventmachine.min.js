!function(e){"use strict";var n=0;"undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(n=4);var t=function(e){e=e||{};for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)r.hasOwnProperty(i)&&("object"==typeof r[i]?t(e[i],r[i]):e[i]=r[i])}return e},r=function(e,i){var o=i||this;o.eventRegistry={};var s={debug:!1,eventErrorHandler:function(e,n,t,r){console.error('Event handler for "%s" resulted in error:',n,e,t,r)}};return e=e||{},o.options=t({},s,e),o.on=function(e,n){o.options.debug&&console.info('Attached handler to event "%s"',e,n),"undefined"==typeof o.eventRegistry[e]&&(o.eventRegistry[e]=[]),o.eventRegistry[e].push(n)},o.emmit=function(){var e=this;e instanceof r&&(e=null);var t=function(e){var n=[];for(var t in e)n.push(e[t]);return n}(arguments),i=t.shift();if("undefined"==typeof o.eventRegistry[i])return void(o.options.debug&&console.info('No handlers registered for event "%s"',i));var s=o.listeners(i);!function(t,r){for(var s in t){var u=function(n,t,r,i){try{n.apply(e,r)}catch(o){i.eventErrorHandler(o,t,r,n)}};setTimeout(u.bind(e,t[s],i,r,o.options),n)}}(s,t)},o.removeListener=function(e,n){if("undefined"==typeof o.eventRegistry[e])return!1;var t=o.eventRegistry[e].indexOf(n);return 0>t?!1:(o.eventRegistry[e].splice(t,1),!0)},o.removeAllListeners=function(e){"undefined"!=typeof o.eventRegistry[e]&&delete o.eventRegistry[e]},o.listeners=function(e){return"undefined"!=typeof o.eventRegistry[e]?o.eventRegistry[e]:[]},o.forward=function(e){return function(){return o.emmit.bind(this,e).apply(this,arguments)}},o};e.EventMachine=function(e){return new r(e)},e.EventMachine.extend=function(e,n){return new r(n,e)}}("undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports:window);